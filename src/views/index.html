<section class="panel">
  <div class="panel__header">
    <input id="search-input" class="search-field" type="search" name="search" placeholder="{{t 'search'}}" autofocus>
    <label class="toggle">
      <input id="show-archived" type="checkbox" {{#if showArchived}}checked{{/if}}>
      <span>{{t 'show_archived'}}</span>
    </label>
  </div>

  <div class="table-wrapper">
    <table class="data-table" id="filament-table">
      <thead>
        <tr>
          <th>{{t 'name'}}</th>
          <th>{{t 'material'}}</th>
          <th>{{t 'diameter'}}</th>
          <th>{{t 'colors'}}</th>
          <th>{{t 'net_weight'}}</th>
          <th>{{t 'remaining'}}</th>
          <th>{{t 'id_number'}}</th>
          <th>{{t 'price_new'}}</th>
          <th>{{t 'product_link'}}</th>
          <th>{{t 'usage'}}</th>
        </tr>
      </thead>
      <tbody>
        {{#each filaments}}
          <tr data-id="{{id}}" class="{{#if archived}}archived{{/if}}">
            <td><a href="/filaments/{{id}}">{{name}}</a></td>
            <td>{{material}}</td>
            <td>{{formatDecimal diameterMm 2}}</td>
            <td>
              {{#if colorsHex}}
                <div class="color-swatches">
                  {{#each colorsHex}}
                    <span class="color-swatch" style="--color: {{this}}" title="{{this}}"></span>
                  {{/each}}
                </div>
              {{/if}}
            </td>
            <td>{{netWeightG}} g</td>
            <td data-remaining>{{formatDecimal remainingG 2}} g</td>
            <td>
              <div class="id-block">
                <span class="id-text">{{id}}</span>
                <div class="id-actions">
                  <a href="/api/codes/barcode.svg?id={{id}}" target="_blank" title="{{t 'barcode'}}">ðŸ“¦</a>
                  <a href="/api/codes/qr.png?text={{encodeURI (filamentUrl id)}}" target="_blank" title="{{t 'qrcode'}}">ðŸ”³</a>
                </div>
              </div>
            </td>
            <td>{{#if priceNewEUR}}â‚¬ {{formatDecimal priceNewEUR 2}}{{/if}}</td>
            <td>{{#if productUrl}}<a href="{{productUrl}}" target="_blank" rel="noopener">Link</a>{{/if}}</td>
            <td>
              <button class="btn" data-action="restock">{{t 'restock'}}</button>
              <a class="btn" href="/print/label/{{id}}" target="_blank">{{t 'reprint_label'}}</a>
              {{#if archived}}
                <button class="btn" data-action="unarchive">{{t 'unarchive'}}</button>
              {{else}}
                <button class="btn btn--danger" data-action="archive">{{t 'archive'}}</button>
              {{/if}}
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</section>

