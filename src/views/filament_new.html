<section class="panel">
  <header class="panel__title">
    <h1>{{t 'menu_new'}}</h1>
  </header>

  <form id="filament-form" class="form" data-mode="create" data-length-unit="{{ui.form.units.length}}" data-weight-unit="{{ui.form.units.weight}}" data-colors-required="{{#if ui.form.requiredFields.colorsHex}}true{{else}}false{{/if}}">
    <div class="form__grid">
      <label>
        <span>{{t 'name'}} {{#if ui.form.requiredFields.name}}<span class="required-flag">*</span>{{/if}}</span>
        <input type="text" name="name" {{#if ui.form.requiredFields.name}}required{{/if}}>
      </label>
      <label>
        <span>{{t 'id_number'}}</span>
        <input type="text" name="id" value="{{defaultId}}" readonly class="input--readonly">
      </label>
      <label>
        <span>{{t 'manufacturer'}} {{#if ui.form.requiredFields.manufacturer}}<span class="required-flag">*</span>{{/if}}</span>
        <input type="text" name="manufacturer" {{#if ui.form.requiredFields.manufacturer}}required{{/if}}>
      </label>
      <label>
        <span>{{t 'material'}} {{#if ui.form.requiredFields.material}}<span class="required-flag">*</span>{{/if}}</span>
        <input type="text" name="material" {{#if ui.form.requiredFields.material}}required{{/if}}>
      </label>
      <label data-field="diameter">
        <span>{{t 'diameter'}} ({{ui.form.units.length}}) {{#if ui.form.requiredFields.diameterMm}}<span class="required-flag">*</span>{{/if}}</span>
        <select name="diameterMm" id="diameter-select" data-required="{{#if ui.form.requiredFields.diameterMm}}true{{else}}false{{/if}}" {{#if ui.form.requiredFields.diameterMm}}required{{/if}}>
          <option value="1.75" selected>
            {{#if (eq ui.form.units.length "inch")}}0.07 inch{{else}}1,75 mm{{/if}}
          </option>
          <option value="2.85">
            {{#if (eq ui.form.units.length "inch")}}0.11 inch{{else}}2,85 mm{{/if}}
          </option>
        </select>
      </label>
      <label>
        <span>{{t 'net_weight'}} ({{ui.form.units.weight}}) {{#if ui.form.requiredFields.netWeightG}}<span class="required-flag">*</span>{{/if}}</span>
        <input type="number" step="1" name="netWeightG" {{#if ui.form.requiredFields.netWeightG}}required{{/if}}>
      </label>
      <label>
        <span>{{t 'remaining'}} ({{ui.form.units.weight}}) {{#if ui.form.requiredFields.remainingG}}<span class="required-flag">*</span>{{/if}}</span>
        <input type="number" step="0.01" name="remainingG" placeholder="{{t 'remaining'}}" {{#if ui.form.requiredFields.remainingG}}required{{/if}}>
      </label>
      <label>
        <span>{{t 'quantity'}} <span class="optional-flag">{{t 'optional'}}</span></span>
        <input type="number" min="0" step="1" name="quantity" value="1">
      </label>
      <label data-field="price">
        <span>{{t 'price_new'}} ({{ui.form.currency}}) {{#unless ui.form.requiredFields.priceNewEUR}}<span class="optional-flag">{{t 'optional'}}</span>{{/unless}}</span>
        <input type="number" step="0.01" name="priceNewEUR" placeholder="{{t 'price_new'}}" {{#if ui.form.requiredFields.priceNewEUR}}required{{/if}}>
      </label>
      <label>
        <span>{{t 'product_link'}} {{#unless ui.form.requiredFields.productUrl}}<span class="optional-flag">{{t 'optional'}}</span>{{/unless}}</span>
        <input type="url" name="productUrl" placeholder="https://..." {{#if ui.form.requiredFields.productUrl}}required{{/if}}>
      </label>
      <label>
        <span>{{t 'is_resin'}}</span>
        <div class="checkbox">
          <input type="checkbox" id="resin-checkbox" name="isResin" value="1">
          <span>{{t 'is_resin'}}</span>
        </div>
      </label>
      <input type="hidden" id="density-hidden" name="density" value="1.24">
      <div class="colors-field full" role="group" aria-labelledby="colors-heading">
        <span id="colors-heading">{{t 'colors'}} {{#if ui.form.requiredFields.colorsHex}}<span class="required-flag">*</span>{{else}}<span class="optional-flag">{{t 'optional'}}</span>{{/if}}</span>
        <span class="form__hint">{{t 'colors_hint'}}</span>
        <div class="color-config">
          <div class="color-options" id="color-options">
            <span class="color-options__title">{{t 'color_settings'}}</span>
            <label class="checkbox">
              <input type="checkbox" id="color-option-normal">
              <span>{{t 'color_option_normal'}}</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="color-option-glow">
              <span>{{t 'color_option_glow'}}</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="color-option-multicolor">
              <span>{{t 'color_option_multicolor'}}</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="color-option-neon">
              <span>{{t 'color_option_neon'}}</span>
            </label>
            <label class="checkbox">
              <input type="checkbox" id="color-option-transparent">
              <span>{{t 'color_option_transparent'}}</span>
            </label>
          </div>
          <div class="color-panels">
            <div class="color-panel" id="color-panel-normal" hidden>
              <div class="color-panel__group">
                <label>
                  <span>{{t 'color_hex'}}</span>
                  <input type="text" id="normal-hex-text" class="hex-input" placeholder="#ff6600">
                </label>
                <label>
                  <span>{{t 'color_base'}}</span>
                  <input type="color" id="normal-hex-color" value="#ff6600">
                </label>
              </div>
              <div id="normal-palette" class="color-palette"></div>
            </div>
            <div class="color-panel" id="color-panel-glow" hidden>
              <div class="color-panel__group">
                <label>
                  <span>{{t 'color_hex'}}</span>
                  <input type="text" id="glow-base-text" class="hex-input" placeholder="#2f2f2f">
                </label>
                <label>
                  <span>{{t 'color_base'}}</span>
                  <input type="color" id="glow-base-color" value="#2f2f2f">
                </label>
              </div>
              <div id="glow-base-palette" class="color-palette"></div>
              <div class="color-panel__group">
                <label>
                  <span>{{t 'color_glow_hex'}}</span>
                  <input type="text" id="glow-hex-text" class="hex-input" placeholder="#39ff14">
                </label>
                <label>
                  <span>{{t 'color_glow'}}</span>
                  <input type="color" id="glow-hex-color" value="#39ff14">
                </label>
              </div>
              <div id="glow-glow-palette" class="color-palette"></div>
            </div>
            <div class="color-panel" id="color-panel-multicolor" hidden>
              <label>
                <span>{{t 'color_multicolor_count'}}</span>
                <select id="multicolor-count">
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                </select>
              </label>
              <div id="multicolor-inputs" class="color-multicolor-inputs"></div>
            </div>
            <div class="color-panel" id="color-panel-neon" hidden>
              <span class="color-panel__subtitle">{{t 'color_neon_palette'}}</span>
              <div id="neon-palette" class="color-neon-palette">
                <button type="button" class="color-neon-option" data-hex="#ff073a">
                  <span class="color-neon-swatch" style="background-color: #ff073a;"></span>
                  <span>Neon Rot</span>
                </button>
                <button type="button" class="color-neon-option" data-hex="#ff1493">
                  <span class="color-neon-swatch" style="background-color: #ff1493;"></span>
                  <span>Neon Pink</span>
                </button>
                <button type="button" class="color-neon-option" data-hex="#39ff14">
                  <span class="color-neon-swatch" style="background-color: #39ff14;"></span>
                  <span>Neon Grün</span>
                </button>
                <button type="button" class="color-neon-option" data-hex="#ffff33">
                  <span class="color-neon-swatch" style="background-color: #ffff33;"></span>
                  <span>Neon Gelb</span>
                </button>
                <button type="button" class="color-neon-option" data-hex="#ff5f1f">
                  <span class="color-neon-swatch" style="background-color: #ff5f1f;"></span>
                  <span>Neon Orange</span>
                </button>
                <button type="button" class="color-neon-option" data-hex="#7df9ff">
                  <span class="color-neon-swatch" style="background-color: #7df9ff;"></span>
                  <span>Neon Türkis</span>
                </button>
                <button type="button" class="color-neon-option" data-hex="#9400d3">
                  <span class="color-neon-swatch" style="background-color: #9400d3;"></span>
                  <span>Neon Violett</span>
                </button>
              </div>
            </div>
          </div>
          <div class="color-preview" id="color-preview" hidden>
            <span class="color-preview__title">{{t 'color_preview'}}</span>
            <div id="color-preview-list"></div>
          </div>
        </div>
      </div>
      <label>
        <span>{{t 'notes'}} {{#unless ui.form.requiredFields.notes}}<span class="optional-flag">{{t 'optional'}}</span>{{/unless}}</span>
        <textarea name="notes" rows="4" placeholder="{{t 'notes'}}" {{#if ui.form.requiredFields.notes}}required{{/if}}></textarea>
      </label>
    </div>
    <footer class="form__actions">
      <div class="form__actions-group">
      <button type="submit" class="btn">{{t 'create'}}</button>
      <a id="print-label-link" class="btn btn--ghost" href="#" hidden>{{t 'print_label'}}</a>
        <button type="button" id="preview-label" class="btn btn--ghost" hidden>{{t 'preview_label'}}</button>
      </div>
      <div class="form__actions-group" id="label-options" hidden>
        <label class="radio">
          <input type="radio" name="labelType" value="1d" checked>
          <span>{{t 'label_barcode'}}</span>
        </label>
        <label class="radio">
          <input type="radio" name="labelType" value="2d">
          <span>{{t 'label_qr'}}</span>
        </label>
        <label class="radio">
          <input type="radio" name="labelType" value="both">
          <span>{{t 'label_both'}}</span>
        </label>
      </div>
    </footer>
  </form>
</section>

<section class="panel panel--ghost">
  <header class="panel__title">
    <h2>{{t 'form_help_title'}}</h2>
  </header>
  <p class="form__hint">{{t 'form_help_text'}}</p>
  <ul class="form-help-list">
    <li>
      <span class="required-flag">*</span>
      {{#each ui.form.lists.required}}
        {{t this.labelKey}}{{#unless @last}}, {{/unless}}
      {{/each}}
    </li>
    <li>
      <span class="optional-flag">{{t 'optional'}}</span>
      {{#if ui.form.lists.optional.length}}
        {{#each ui.form.lists.optional}}
          {{t this.labelKey}}{{#unless @last}}, {{/unless}}
        {{/each}}
      {{else}}
        —
      {{/if}}
    </li>
    <li>{{t 'is_resin'}} → {{t 'diameter'}} &amp; Dichte werden automatisch angepasst.</li>
  </ul>
</section>

