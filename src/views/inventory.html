<section class="panel" data-page="inventory">
  <header class="panel__title">
    <h1>{{t 'inventory_title'}}</h1>
    <div class="panel__actions">
      <button type="button" class="btn" id="inventory-export-btn">{{t 'inventory_export'}}</button>
    </div>
  </header>
  <p class="form__hint">{{t 'inventory_intro'}}</p>

  <div class="table-wrapper">
    <table class="data-table" id="inventory-table">
      <thead>
        <tr>
          <th>{{t 'name'}}</th>
          <th>{{t 'inventory_expected'}}</th>
          <th>{{t 'inventory_counted'}}</th>
          <th>{{t 'inventory_difference'}}</th>
          <th>{{t 'inventory_remaining'}}</th>
        </tr>
      </thead>
      <tbody>
        {{#if filaments.length}}
          {{#each filaments}}
            <tr data-id="{{this.id}}" data-expected="{{this.quantity}}" data-remaining="{{formatDecimal this.remainingG 2}}">
              <td>
                <div class="inventory-name">{{this.name}}</div>
                <div class="inventory-meta">
                  <span>{{this.id}}</span>
                  <span>{{this.manufacturer}}</span>
                  <span>{{this.material}}</span>
                </div>
              </td>
              <td class="inventory-expected">{{this.quantity}}</td>
              <td>
                <input
                  type="number"
                  min="0"
                  step="1"
                  class="inventory-count-input"
                  value="{{this.quantity}}"
                  aria-label="{{t 'inventory_counted'}} - {{this.name}}"
                >
              </td>
              <td class="inventory-diff">0</td>
              <td>{{formatDecimal this.remainingG 2}}</td>
            </tr>
          {{/each}}
        {{else}}
          <tr>
            <td colspan="5">{{t 'inventory_no_data'}}</td>
          </tr>
        {{/if}}
      </tbody>
    </table>
  </div>

  <div class="inventory-summary">
    <div class="inventory-summary__item">
      <span>{{t 'inventory_total_expected'}}</span>
      <strong id="inventory-total-expected">{{totals.totalExpected}}</strong>
    </div>
    <div class="inventory-summary__item">
      <span>{{t 'inventory_total_counted'}}</span>
      <strong id="inventory-total-counted">{{totals.totalExpected}}</strong>
    </div>
    <div class="inventory-summary__item">
      <span>{{t 'inventory_total_difference'}}</span>
      <strong id="inventory-total-diff">0</strong>
    </div>
    <div class="inventory-summary__item">
      <span>{{t 'inventory_total_remaining'}}</span>
      <strong>{{formatDecimal totals.totalRemaining 2}} g</strong>
    </div>
  </div>
</section>

